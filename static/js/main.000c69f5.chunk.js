(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{164:function(e,t,n){},282:function(e,t){},287:function(e,t){},288:function(e,t){},296:function(e,t){},300:function(e,t,n){"use strict";n.r(t);var r=n(13),c=n.n(r),i=n(118),s=n.n(i),o=(n(299),n(7)),a=n(8),l=n(105),u=n(104),h=(n(164),n(109)),j=n.p+"static/media/pictogram.2b84e74e.jpg",b=n.p+"static/media/clothes.18bb6e03.jpg",f=n(21),d=function(){return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{style:{textAlign:"center"},children:"Welcome to Mirror Size!"}),Object(f.jsxs)("section",{className:"hero",children:[Object(f.jsx)("img",{src:b,alt:"Clothes photo by Priscilla Du Preez on Unsplash",className:"hero-img"}),Object(f.jsxs)("div",{className:"hero-txt",children:[Object(f.jsx)("h2",{className:"info-title",children:"Check out what would be your best size"}),Object(f.jsxs)("p",{className:"info-subtitle",children:["Have you ever bought clothes that didn't fit you well? This is one of the most common problems that fashion e-commerce stores have.",Object(f.jsx)("br",{}),Object(f.jsx)("br",{}),"This app is using the Tensorflow pose detection API to estimate what would be your best size compared to an array where the real measures are saved"]})]})]}),Object(f.jsxs)("section",{className:"how-to",children:[Object(f.jsx)("h2",{className:"info-title",children:"How to use it?"}),Object(f.jsxs)("ul",{className:"info-subtitle",children:[Object(f.jsx)("li",{children:"Write your height in cm"}),Object(f.jsx)("li",{children:"Click the capture button"}),Object(f.jsx)("li",{children:"You'll have 10 seconds to pose like this (make sure you show your hands and hips) "}),Object(f.jsx)("li",{children:"That's it! you'll probably have to wait a few seconds to visualize your size"})]}),Object(f.jsx)("img",{src:j,alt:"Testing img",className:"tutorial-img"})]}),Object(f.jsx)("button",{className:"go-button",children:Object(f.jsx)(h.b,{to:"/MirrorSize/demo",className:"go-button",children:"Give it a try!"})})]})},m=n(24),g=n(10),O=n.n(g),v=n(14),x=n(6),p=n(226),y=n.n(p),w=n(305);function S(e,t,n){var r,c=e[0].keypoints,i=[c[t].y,c[t].x],s=[c[n].y,c[n].x],o=(r=s,i.reduce((function(e,t,n){var c=t-r[n];return e.push(c),e}),[])),a=o[1],l=o[0],u=Object(w.a)(a^2+l^2);if("number"===typeof u)return u}var k=n(227),z=n.n(k),C=n(106),N="#27d594";function P(e,t,n,r,c){e.beginPath(),e.arc(n,t,r,0,2*Math.PI),e.fillStyle=c,e.fill()}var T=[["11","12"],["12","24"]],M=[["14","12"],["14","16"],["16","20"]];function R(e,t){for(var n=[],r=0,c=e.length;r<c;r++){var i=S(t,e[r][0],e[r][1]);try{n.push(i)}catch(s){console.log("This is an error")}}return n}var A={Small:[43,70],Medium:[50,76],Large:[56,77],XLarge:[58,80]};function E(e,t){var n=0,r=[],c="First loading...",i=R(M,e),s=R(T,e);if(3===i.length&&2===s.length){var o=2*z.a.sum(i)+S(e,11,12);n=t/o,r=R(T,e).map((function(e){return e*n}));if(c=function(e,t){for(var n in e){var r=e[n][0]-t[0],c=e[n][1]-t[1];if(!(r<0||c<0))return n}}(A,r),void 0!==c)return c;c="Sorry we don't have it in your size :("}return c}n(298);var I={width:640,height:480,facingMode:"user"},L=function(){var e=Object(r.useState)(""),t=Object(x.a)(e,2),n=t[0],i=t[1],s=Object(r.useState)(0),o=Object(x.a)(s,2),a=o[0],l=o[1],u=Object(r.useState)(),h=Object(x.a)(u,2),j=h[0],b=h[1],d=Object(r.useState)(),m=Object(x.a)(d,2),g=m[0],p=m[1],w=Object(r.useState)(null),S=Object(x.a)(w,2),k=S[0],z=S[1],T=Object(r.useRef)(null);Object(r.useEffect)((function(){M(g)}),[n]),Object(r.useEffect)((function(){if(0===k&&z(null),k){var e=setInterval((function(){z(k-1)}),1e3);return function(){return clearInterval(e)}}}),[k]);var M=function(){var e=Object(v.a)(O.a.mark((function e(t){var n,r,c;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=C.a.BlazePose,r={runtime:"tfjs",enableSmoothing:!0,modelType:"full"},e.next=4,C.b(n,r);case 4:c=e.sent,R(c,t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(v.a)(O.a.mark((function e(t,r){var c,i,s,o;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n){e.next=7;break}return c={flipHorizontal:!0},i=performance.now(),e.next=5,t.estimatePoses(r,c,i);case 5:s=e.sent;try{o=E(s,a),console.log(o),H(s,r,I.width,I.height,T),b(o)}catch(l){console.log(l.message)}case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=c.a.useRef(null),L=c.a.useCallback((function(){var e=A.current.getScreenshot(),t=document.createElement("img");t.src=e,t.width=640,t.height=480,p(t),i(e)}),[A]),H=function(e,t,n,r,c){var i=c.current.getContext("2d");c.current.width=n,c.current.height=r,function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=0;c<e.length;c++){var i=e[c];if(!(i.score<t)){var s=i.x;P(n,i.y*r,s*r,3,N)}}}(e[0].keypoints,.6,i),function(e,t){C.c.getAdjacentPairs(C.a.BlazePose).forEach((function(n){var r=Object(x.a)(n,2),c=r[0],i=r[1],s=e[c],o=e[i],a=null!=s.score?s.score:1,l=null!=o.score?o.score:1;a>=.65&&l>=.65&&(t.beginPath(),t.moveTo(s.x,s.y),t.lineTo(o.x,o.y),t.strokeStyle="gray",t.stroke())}))}(e[0].keypoints,i)},W=function(e){var t=e.current.getContext("2d");console.log(e),t.clearRect(0,0,e.current.width,e.current.height)};return Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{style:{fontSize:32},children:k}),Object(f.jsx)("div",{className:"webcam-container",children:Object(f.jsxs)("div",{className:"webcam-img",children:[""===n?Object(f.jsx)(y.a,{audio:!1,height:480,ref:A,screenshotFormat:"image/jpeg",width:640,videoConstraints:I}):Object(f.jsx)("img",{src:n,id:n,alt:"loading"}),Object(f.jsx)("canvas",{ref:T,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:640,height:480}})]})}),Object(f.jsxs)("div",{style:{position:"relative",marginLeft:"auto",marginRight:"auto",justifyContent:"flex-end"},children:[Object(f.jsx)("label",{children:"What's your height? (cm) "}),Object(f.jsx)("input",{type:"number",onChange:function(e){return l(e.target.value)},style:{borderStyle:"groove",borderColor:"gray"}}),Object(f.jsx)("h2",{children:"Your size should be:"}),Object(f.jsx)("h3",{children:j})]}),Object(f.jsx)("button",{onClick:function(){null!=n&&(i(""),p(null),W(T)),z(10),setTimeout((function(){L()}),1e4)},children:"Capture photo"})]})},H=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){return Object(f.jsxs)(m.c,{children:[Object(f.jsx)(m.a,{path:"/MirrorSize",element:Object(f.jsx)(d,{})}),Object(f.jsx)(m.a,{path:"/MirrorSize/demo",element:Object(f.jsx)(L,{})})]})}}]),n}(c.a.Component),W=H,B=n(150);Object(B.combineReducers)({}),n(297);s.a.render(Object(f.jsx)(h.a,{children:Object(f.jsx)(W,{})}),document.querySelector("#root"))}},[[300,1,2]]]);
//# sourceMappingURL=main.000c69f5.chunk.js.map