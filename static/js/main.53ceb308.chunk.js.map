{"version":3,"sources":["imgs/pictogram.jpg","imgs/clothes.jpg","Landing.js","Size.js","pose-detection/utilities.js","comparingDistance.js","pose-detection/WebcamCapture.js","App.js","reducers/index.js","index.js"],"names":["Landing","style","textAlign","className","src","clothes","alt","pictogram","to","Size","poses","pointIndex","adjacentPointIndex","second","keypoints","point","adjacentPoint","substraction","reduce","acc","curr","i","sub","push","myX","myY","elementDistance","sqrt","COLOR","drawPoint","ctx","y","x","r","color","beginPath","arc","Math","PI","fillStyle","fill","t_shirt_array","half_span_arr","iterateSize","arr","result_arr","len","length","currentSize","e","console","log","Small","Medium","Large","XLarge","comparingDistance","height","size_factor","real_size","size_str","results_arr","tshirt_results_array","cv_distance","_","sum","map","property","w","h","comparing","undefined","videoConstraints","width","facingMode","WebcamCapture","useState","photo","setPhoto","setHeight","size","setSize","myImage","setMyImage","timer","setTimer","canvasRef","useRef","useEffect","myDetector","intervalId","setInterval","clearInterval","image","a","model","poseDetection","BlazePose","detectorConfig","runtime","enableSmoothing","modelType","detector","detect","estimationConfig","flipHorizontal","timestamp","performance","now","estimatePoses","distance","drawCanvas","message","webcamRef","React","capture","useCallback","imageSrc","current","getScreenshot","document","createElement","img","imgWidth","imgHeight","canvas","getContext","minConfidence","scale","keypoint","score","drawKeypoints","posedetection","getAdjacentPairs","forEach","j","kp1","kp2","score1","score2","moveTo","lineTo","strokeStyle","stroke","drawSkeleton","clearCanvas","clearRect","fontSize","audio","ref","screenshotFormat","id","position","marginLeft","marginRight","left","right","zindex","justifyContent","type","onChange","target","value","borderStyle","borderColor","onClick","setTimeout","App","path","element","Component","combineReducers","ReactDOM","render","querySelector"],"mappings":"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","file":"static/js/main.53ceb308.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/pictogram.2b84e74e.jpg\";","export default __webpack_public_path__ + \"static/media/clothes.18bb6e03.jpg\";","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport pictogram from '../src/imgs/pictogram.jpg';\r\nimport clothes from '../src/imgs/clothes.jpg';\r\n\r\nconst Landing = () => {\r\n  return (\r\n    <div>\r\n        <h1 style={{textAlign: 'center'}}>\r\n            Welcome to Mirror Size!\r\n        </h1>\r\n        <section className='hero'>\r\n            <img src = {clothes} alt = \"Clothes photo by Priscilla Du Preez on Unsplash\" className='hero-img' />\r\n            <div className='hero-txt'>\r\n                <h2 className='info-title'>\r\n                    Check out what would be your best size\r\n                </h2>\r\n                <p className='info-subtitle'>\r\n                    Have you ever bought clothes that didn't fit you well? This is one of the most common problems that fashion e-commerce stores have.\r\n                    <br/>\r\n                    <br/>\r\n                    This app is using the Tensorflow pose detection API to estimate what would be your best size compared to an array where the real measures are saved\r\n                </p>\r\n            </div>\r\n        </section>\r\n\r\n        <section className='how-to'>\r\n            <h2 className='info-title'>\r\n                How to use it?\r\n            </h2>\r\n            <ul className='info-subtitle'>\r\n                <li>Write your height in cm</li>\r\n                <li>Click the capture button</li>\r\n                <li>You'll have 10 seconds to pose like this (make sure you show your hands and hips) </li>\r\n                <li>That's it! you'll probably have to wait a few seconds to visualize your size</li>\r\n            </ul>\r\n            <img src = {pictogram} alt = \"Testing img\" className='tutorial-img'/>\r\n\r\n        </section>\r\n        <button className='go-button'>\r\n            <Link to = \"/MirrorSize/demo\" className='go-button'>\r\n                Give it a try!\r\n            </Link>\r\n        </button>\r\n\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Landing","import {sqrt} from 'mathjs'\r\n\r\nexport default function Size(poses, pointIndex, adjacentPointIndex) {\r\n\r\n    const substract = (first, second) =>\r\n        first.reduce((acc, curr, i) => {\r\n            const sub = curr - second[i];\r\n            acc.push(sub);\r\n            return acc;\r\n        }, []);\r\n\r\n\r\n\r\n    const keypoints = poses[\"0\"][\"keypoints\"];\r\n\r\n\r\n    const point = [keypoints[pointIndex][\"y\"],keypoints[pointIndex][\"x\"] ]\r\n    \r\n\r\n    const adjacentPoint = [keypoints[adjacentPointIndex][\"y\"], keypoints[adjacentPointIndex][\"x\"]]\r\n\r\n\r\n    // Score avg:\r\n    // const score = keypoints[pointIndex][\"score\"]\r\n    // const adjacentScore = keypoints[adjacentPointIndex][\"score\"]\r\n    // const score_avg = (score+adjacentScore)/2\r\n    // console.log(score_avg)\r\n    \r\n    const substraction = substract(point, adjacentPoint)\r\n    \r\n    const myX = substraction[1];\r\n    const myY = substraction[0]\r\n    const elementDistance = sqrt(myX^2+myY^2);\r\n\r\n\r\n\r\n    if(typeof(elementDistance) === 'number'){\r\n        return elementDistance\r\n    }\r\n\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import Size from '../Size';\r\n\r\nimport * as posedetection from '@tensorflow-models/pose-detection';\r\n\r\nconst COLOR = '#27d594';\r\nconst COLOR_LINE = 'gray'\r\n\r\n\r\n// (keypoints, minConfidence, ctx, scale = 1\r\n\r\n\r\nexport function drawSkeleton(keypoints, ctx) {\r\n    const adjacentKeyPoints =\r\n\r\n        posedetection.util.getAdjacentPairs(posedetection.SupportedModels.BlazePose);\r\n\r\n    adjacentKeyPoints.forEach(([\r\n                                                                      i, j\r\n                                                                    ]) => {\r\n      const kp1 = keypoints[i];\r\n      const kp2 = keypoints[j];\r\n\r\n      // If score is null, just show the keypoint.\r\n      const score1 = kp1.score != null ? kp1.score : 1;\r\n      const score2 = kp2.score != null ? kp2.score : 1;\r\n      const scoreThreshold = 0.65 || 0;\r\n\r\n      if (score1 >= scoreThreshold && score2 >= scoreThreshold) {\r\n        ctx.beginPath();\r\n        ctx.moveTo(kp1.x, kp1.y);\r\n        ctx.lineTo(kp2.x, kp2.y);\r\n        ctx.strokeStyle = COLOR_LINE;\r\n        ctx.stroke();\r\n      }\r\n    });\r\n\r\n\r\n\r\n}\r\n  \r\n\r\nexport function drawKeypoints(keypoints, minConfidence, ctx, scale = 1) {\r\n    for (let i = 0; i < keypoints.length; i++) {\r\n        const keypoint = keypoints[i];\r\n    \r\n        if (keypoint.score < minConfidence) {\r\n            continue;\r\n        }\r\n\r\n        const x = keypoint.x;\r\n        const y = keypoint.y;\r\n\r\n        drawPoint(ctx, y * scale, x * scale, 3, COLOR);\r\n    }\r\n}\r\n\r\n\r\nexport function drawPoint(ctx, y, x, r, color) {\r\n    ctx.beginPath();\r\n    ctx.arc(x, y, r, 0, 2 * Math.PI);\r\n    ctx.fillStyle = color;\r\n    ctx.fill();\r\n}\r\n  \r\n\r\n\r\nexport const blazeposearray = [[\"11\", \"12\"],[\"24\", \"23\"],[\"12\", \"24\"],[\"11\", \"23\"],[\"14\", \"16\"],[\"13\", \"15\"]]\r\n\r\nexport const t_shirt_array = [[\"11\", \"12\"],[\"12\", \"24\"] ]\r\n\r\nexport const arm_span_arr = [[\"12\", \"11\"], [\"14\", \"12\"], [\"14\", \"16\"], [\"16\", \"20\"], [\"11\", \"13\"], [\"13\", \"15\"], [\"15\", \"19\"]]\r\n\r\nexport const half_span_arr = [[\"14\", \"12\"], [\"14\", \"16\"], [\"16\", \"20\"]]\r\n\r\n\r\nexport function iterateSize(arr, poses) {\r\n\r\n    let result_arr = []\r\n    for(let i =0, len = arr.length; i<len; i++){\r\n        \r\n        let currentSize = Size(poses, arr[i][0], arr[i][1])\r\n\r\n\r\n        try{\r\n            result_arr.push(currentSize)\r\n         } catch(e){\r\n             console.log(\"This is an error\")\r\n         }\r\n\r\n\r\n\r\n    } \r\n\r\n    return result_arr\r\n}\r\n\r\n\r\nexport const clothes ={\r\n    Small: [43, 70],\r\n    Medium: [50, 76],\r\n    Large: [56, 77],\r\n    XLarge: [58, 80]\r\n}\r\n\r\n\r\n","import Size from \"./Size\";\r\nimport _ from 'lodash';\r\nimport {iterateSize, t_shirt_array } from \"./pose-detection/utilities\";\r\nimport { clothes } from \"./pose-detection/utilities\";\r\nimport {half_span_arr } from \"./pose-detection/utilities\";\r\n\r\n\r\n// Returns a string\r\n\r\nexport default function comparingDistance(poses, height){\r\n    \r\n    let size_factor = 0;\r\n    let real_size = [];\r\n    let size_str = \"First loading...\"\r\n    \r\n    let results_arr = iterateSize(half_span_arr, poses); //using just 1 arm\r\n    let tshirt_results_array = iterateSize(t_shirt_array, poses);\r\n    // console.log(\"tshirt2: \"+tshirt_results_array.length)\r\n    // console.log(\"results3: \"+results_arr.length)\r\n    // console.log(\"Comparing height:\"+height)\r\n\r\n\r\n    if(results_arr.length ===3 && tshirt_results_array.length===2){ \r\n        const cv_distance = _.sum(results_arr)*2 + Size(poses, 11, 12);\r\n        size_factor = ((height)/cv_distance);\r\n\r\n        real_size= iterateSize(t_shirt_array, poses).map(x=>x*size_factor)\r\n\r\n\r\n        const comparing=(clothes, real_size)=>{\r\n            for (const property in clothes){\r\n                const w = clothes[property][0]-real_size[0];\r\n                const h = clothes[property][1]-real_size[1];\r\n\r\n                if(w<0 || h<0){\r\n                    continue;\r\n                } \r\n                const property_name = property;\r\n\r\n                return property_name\r\n            }\r\n        }\r\n\r\n        \r\n\r\n        size_str = comparing(clothes, real_size);\r\n\r\n        if(size_str !== undefined){\r\n            return size_str\r\n        }else{\r\n            size_str = \"Sorry we don't have it in your size :(\"\r\n            \r\n        }\r\n\r\n    }\r\n\r\n    return size_str;\r\n\r\n}","import React, { useEffect, useRef, useState } from \"react\";\r\nimport Webcam from \"react-webcam\";\r\nimport comparingDistance from \"../comparingDistance\";\r\n\r\n\r\nimport * as poseDetection from '@tensorflow-models/pose-detection';\r\nimport '@tensorflow/tfjs-backend-webgl';\r\n\r\nimport { drawKeypoints, drawSkeleton } from \"./utilities\";\r\n\r\nconst videoConstraints = {\r\n    width: 640,\r\n    height:480,\r\n    facingMode: \"user\"\r\n};\r\n\r\nconst WebcamCapture = ()=>{\r\n    const [photo, setPhoto] = useState('');\r\n    const [height, setHeight] = useState(0);\r\n    const [size, setSize] = useState();\r\n    const [myImage, setMyImage] = useState();\r\n    const [timer, setTimer] = useState(null);\r\n    \r\n\r\n    const canvasRef = useRef(null);\r\n\r\n\r\n    useEffect(\r\n        ()=>{\r\n            myDetector(myImage);\r\n            \r\n\r\n        },[photo]\r\n    )\r\n\r\n    useEffect(\r\n        ()=>{\r\n            \r\n            if (timer ===0){\r\n                setTimer(null);\r\n            }\r\n\r\n            if(!timer) return;\r\n\r\n            const intervalId = setInterval(()=>{\r\n                setTimer(timer-1);\r\n            }, 1000);\r\n\r\n            return ()=>clearInterval(intervalId);\r\n        }, [timer]);\r\n\r\n\r\n\r\n    const myDetector = async(image)=>{\r\n        const model = poseDetection.SupportedModels.BlazePose;\r\n        const detectorConfig={\r\n            runtime: 'tfjs',\r\n            enableSmoothing: true,\r\n            modelType: 'full'\r\n        };\r\n\r\n        const detector = await poseDetection.createDetector(model, detectorConfig);\r\n\r\n        detect(detector, image);\r\n\r\n\r\n    }\r\n    \r\n\r\n    \r\n    const detect = async(detector, image)=>{\r\n\r\n        if( photo !==null){\r\n\r\n            const estimationConfig = {flipHorizontal:true}\r\n            const timestamp = performance.now();\r\n\r\n            const poses = await detector.estimatePoses(image, estimationConfig, timestamp)\r\n\r\n            try{\r\n                const distance = comparingDistance(poses, height);\r\n                console.log(distance)\r\n                \r\n                drawCanvas(poses, image, videoConstraints.width, videoConstraints.height, canvasRef);\r\n\r\n                setSize(distance)\r\n            }catch(e){\r\n                console.log(e.message)\r\n            }\r\n        }\r\n\r\n        \r\n    }\r\n\r\n\r\n    const webcamRef = React.useRef(null)\r\n\r\n    const handleClick =()=>{\r\n\r\n        if (photo != null){\r\n            setPhoto('');\r\n            setMyImage(null)\r\n            clearCanvas(canvasRef)\r\n        }\r\n        setTimer(10);\r\n\r\n        setTimeout(()=>{            \r\n            capture();\r\n        }, 10000)\r\n    }\r\n    \r\n    const capture = React.useCallback(\r\n        \r\n        ()=>{\r\n            \r\n            \r\n            const imageSrc = webcamRef.current.getScreenshot();\r\n            \r\n            \r\n            \r\n            const image = document.createElement(\"img\");\r\n            image.src = imageSrc\r\n            image.width = 640\r\n            image.height = 480\r\n            \r\n            \r\n            setMyImage(image);  \r\n            setPhoto(imageSrc);\r\n        },\r\n        [webcamRef]\r\n    );\r\n\r\n\r\n    const drawCanvas = (poses, img, imgWidth, imgHeight, canvas)=>{\r\n        const ctx =  canvas.current.getContext(\"2d\");\r\n        canvas.current.width = imgWidth;\r\n        canvas.current.height = imgHeight;\r\n\r\n        drawKeypoints(poses[\"0\"][\"keypoints\"], 0.6, ctx);\r\n        drawSkeleton(poses[\"0\"][\"keypoints\"], ctx);\r\n\r\n\r\n\r\n    }\r\n\r\n    const clearCanvas = (canvas)=>{\r\n\r\n        const ctx =  canvas.current.getContext(\"2d\");\r\n        console.log(canvas)\r\n        \r\n        ctx.clearRect(0, 0, canvas.current.width, canvas.current.height);\r\n    }\r\n\r\n\r\n    return(\r\n        <div>\r\n            <h2>Say cheese! :)</h2>\r\n            <h3 style={{fontSize:32}}>{timer}</h3>\r\n            <div className=\"webcam-container\">\r\n                <div className=\"webcam-img\">\r\n\r\n                    {photo === ''? <Webcam\r\n                        audio = {false}\r\n                        height= {480}\r\n                        ref = {webcamRef}\r\n                        screenshotFormat= \"image/jpeg\"\r\n                        width={640}\r\n                        videoConstraints= {videoConstraints}\r\n                        />: <img src = {photo} id ={photo} alt = 'loading'/>\r\n                    }\r\n                    <canvas\r\n                        ref = {canvasRef}\r\n                        style = {{\r\n                        position: \"absolute\",\r\n                        marginLeft: \"auto\",\r\n                        marginRight: \"auto\",\r\n                        left: 0,\r\n                        right:0,\r\n                        textAlign: 'center',\r\n                        zindex: 9,\r\n                        width: 640,\r\n                        height:480\r\n                        }}\r\n                    />\r\n                </div>\r\n\r\n            </div>\r\n\r\n\r\n            <div\r\n            style= {{\r\n\r\n              position:'relative',\r\n              marginLeft:'auto',\r\n              marginRight: \"auto\",\r\n              justifyContent: 'flex-end',\r\n           \r\n            }}  \r\n          >\r\n            <label>What's your height? (cm) </label>\r\n            <input \r\n              type={\"number\"} \r\n              onChange={e=>setHeight(e.target.value)}\r\n              style={{\r\n                borderStyle: 'groove',\r\n                borderColor: 'gray'\r\n              }} \r\n            />\r\n            \r\n            <h2>\r\n            Your size should be:\r\n            </h2>\r\n            <h3>\r\n                {size}\r\n            </h3>\r\n          </div>\r\n            <button onClick={handleClick}>Capture photo</button>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default WebcamCapture;\r\n","import React from 'react';\r\n// import Camera from './pose-detection/Camera';\r\nimport './App.css';\r\nimport Landing from './Landing';\r\nimport { Routes, Route } from 'react-router-dom';\r\n// import Webcam from 'react-webcam';\r\nimport WebcamCapture from './pose-detection/WebcamCapture'; \r\n\r\n\r\n\r\nclass App extends React.Component{\r\n\r\n    render(){\r\n        return(\r\n            \r\n            <Routes >\r\n\r\n                {/* <Camera/> */}\r\n                {/* <WebcamCapture/> */}\r\n                <Route path = \"/MirrorSize\" element = {<Landing/>}/>\r\n                <Route path = \"/MirrorSize/demo\" element = {<WebcamCapture/>}/>\r\n                \r\n                \r\n            </Routes>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport default App;","import {combineReducers} from 'redux';\r\n\r\n\r\n\r\nexport default combineReducers({\r\n\r\n});","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\n\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport reduxThunk from 'redux-thunk';\r\n\r\nimport App from './App';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport reducers from './reducers';\r\nimport { composeWithDevTools } from 'redux-devtools-extension';\r\nimport './App.css';\r\n\r\n\r\n\r\n\r\n\r\nReactDOM.render(<BrowserRouter><App/></BrowserRouter> , document.querySelector('#root'));\r\n"],"sourceRoot":""}