(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{220:function(e,t,n){},281:function(e,t){},286:function(e,t){},287:function(e,t){},295:function(e,t){},297:function(e,t,n){"use strict";n.r(t);var r=n(15),c=n.n(r),o=n(116),i=n.n(o),a=n(247),s=n(103),u=n(246),l=n(7),h=n(8),f=n(104),j=n(102),b=n(9),g=n.n(b),d=n(13),v=n(6),O=n(301);function p(e,t,n){var r=e[0].keypoints,c=[r[t].y,r[t].x],o=[r[n].y,r[n].x],i=(r[t].score+r[n].score)/2;console.log(i);var a,s=(a=o,c.reduce((function(e,t,n){var r=t-a[n];return e.push(r),e}),[])),u=s[1],l=s[0],h=Object(O.a)(u^2+l^2);if("number"===typeof h)return h}var m=n(67),y="#27d594";function x(e,t){m.c.getAdjacentPairs(m.a.BlazePose).forEach((function(n){var r=Object(v.a)(n,2),c=r[0],o=r[1],i=e[c],a=e[o],s=null!=i.score?i.score:1,u=null!=a.score?a.score:1;s>=.65&&u>=.65&&(t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(a.x,a.y),t.strokeStyle="gray",t.stroke())}))}function w(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,c=0;c<e.length;c++){var o=e[c];if(!(o.score<t)){var i=o.x,a=o.y;S(n,a*r,i*r,3,y)}}}function S(e,t,n,r,c){e.beginPath(),e.arc(n,t,r,0,2*Math.PI),e.fillStyle=c,e.fill()}var k=[["11","12"],["12","24"]],C=[["14","12"],["14","16"],["16","20"]];function z(e,t){for(var n=[],r=0,c=e.length;r<c;r++){var o=p(t,e[r][0],e[r][1]);try{n.push(o)}catch(i){console.log("This is an error")}}return n}var P={Small:[43,70],Medium:[50,76],Large:[56,77],XLarge:[58,80]},T=n(111),M=n.n(T),R=(n(221),n(244)),E=n.n(R);function L(e,t){var n=0,r=[],c="First loading...",o=z(C,e),i=z(k,e);if(console.log("tshirt2: "+i.length),console.log("results3: "+o.length),console.log("Comparing height:"+t),3===o.length&&2===i.length){var a=2*E.a.sum(o)+p(e,11,12);n=t/a,r=z(k,e).map((function(e){return e*n}));if(c=function(e,t){for(var n in e){var r=e[n][0]-t[0],c=e[n][1]-t[1];if(!(r<0||c<0))return n}}(P,r),void 0!==c)return c;c="Sorry we don't have it in your size :(",console.log("Sorry we don't have it in your size :(")}return c}var A=n(30);n(220);var I={width:640,height:480,facingMode:"user"},W=function(){var e=Object(r.useState)(""),t=Object(v.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)(0),a=Object(v.a)(i,2),s=a[0],u=a[1],l=Object(r.useState)(),h=Object(v.a)(l,2),f=h[0],j=h[1],b=Object(r.useState)(),O=Object(v.a)(b,2),p=O[0],y=O[1],S=Object(r.useState)(null),k=Object(v.a)(S,2),C=k[0],z=k[1],P=Object(r.useRef)(null);Object(r.useEffect)((function(){T(p)}),[n]),Object(r.useEffect)((function(){if(0===C&&z(null),C){var e=setInterval((function(){z(C-1)}),1e3);return function(){return clearInterval(e)}}}),[C]);var T=function(){var e=Object(d.a)(g.a.mark((function e(t){var n,r,c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=m.a.BlazePose,r={runtime:"tfjs",enableSmoothing:!0,modelType:"full"},e.next=4,m.b(n,r);case 4:c=e.sent,R(c,t);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R=function(){var e=Object(d.a)(g.a.mark((function e(t,r){var c,o,i,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===typeof n){e.next=7;break}return c={flipHorizontal:!0},o=performance.now(),e.next=5,t.estimatePoses(r,c,o);case 5:i=e.sent;try{a=L(i,s),console.log(a),B(i,r,I.width,I.height,P),j(a)}catch(u){console.log(u.message)}case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E=c.a.useRef(null),W=c.a.useCallback((function(){var e=E.current.getScreenshot();o(e);var t=document.createElement("img");t.src=e,t.width=640,t.height=480,y(t)}),[E]),B=function(e,t,n,r,c){var o=c.current.getContext("2d");c.current.width=n,c.current.height=r,w(e[0].keypoints,.6,o),x(e[0].keypoints,o)};return Object(A.jsxs)("div",{children:[Object(A.jsx)("h3",{style:{fontSize:32},children:C}),Object(A.jsx)("div",{className:"webcam-container",children:Object(A.jsxs)("div",{className:"webcam-img",children:[""==n?Object(A.jsx)(M.a,{audio:!1,height:480,ref:E,screenshotFormat:"image/jpeg",width:640,videoConstraints:I}):Object(A.jsx)("img",{src:n,id:n}),Object(A.jsx)("canvas",{ref:P,style:{position:"absolute",marginLeft:"auto",marginRight:"auto",left:0,right:0,textAlign:"center",zindex:9,width:640,height:480}})]})}),Object(A.jsxs)("div",{style:{position:"relative",marginLeft:"auto",marginRight:"auto",justifyContent:"flex-end"},children:[Object(A.jsx)("label",{children:"What's your height? (cm) "}),Object(A.jsx)("input",{type:"number",onChange:function(e){return u(e.target.value)},style:{borderStyle:"groove",borderColor:"gray"}}),Object(A.jsx)("h2",{children:"Your size should be:"}),Object(A.jsx)("h3",{children:f})]}),Object(A.jsx)("button",{onClick:function(){z(3),setTimeout((function(){W()}),3e3)},children:"Capture photo"})]})},B=function(e){Object(f.a)(n,e);var t=Object(j.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(h.a)(n,[{key:"render",value:function(){return Object(A.jsxs)("div",{children:[Object(A.jsx)("h1",{style:{textAlign:"center"},children:"Welcome to Mirror Size!"}),"Checkout what would be your best fit!",Object(A.jsx)(W,{})]})}}]),n}(c.a.Component),F=B,J=Object(s.combineReducers)({}),N=n(245),q=Object(s.createStore)(J,{},Object(N.composeWithDevTools)(Object(s.applyMiddleware)(u.a)));i.a.render(Object(A.jsx)(a.a,{store:q,children:Object(A.jsx)(F,{})}),document.querySelector("#root"))}},[[297,1,2]]]);
//# sourceMappingURL=main.8e44e650.chunk.js.map